---
layout:     post
title:      Mysql
subtitle:   mysql学习
date:       2018-11-12
author:     LY
header-img: img/post-bg-kuaidi.jpg
catalog: true
tags:
    - MySQL	
    

---

# MySQL

SQL Server、 DB2 、PostgreSQL、 MySQL 、Oracle语法有细微的不同，本文以MySQL为主。
	
法则1-1 关系数据库以行为单位读写数据。

法则1-2 一个单元格中只能输入一个数据。

法则1-3 学会标准SQL就可以在各种RDBMS中书写SQL语句了。

法则1-4 SQL根据功能不同可以分为三类，其中使用最多的是DML。

●DDL

DDL（Data Definition Language，数据定义语言） 用来创建或者删除存储数据用的数据库以及数据库中的表等对象。DDL 包含以下几种指令。

CREATE ： 创建数据库和表等对象

DROP ： 删除数据库和表等对象

ALTER ： 修改数据库和表等对象的结构

●DML

DML（Data Manipulation Language，数据操纵语言） 用来查询或者变更表中的记录。DML 包含以下几种指令。

SELECT ：查询表中的数据

INSERT ：向表中插入新数据

UPDATE ：更新表中的数据

DELETE ：删除表中的数据

●DCL

DCL（Data Control Language，数据控制语言） 用来确认或者取消对数据库中的数据进行的变更。除此之外，还可以对 RDBMS 的用户是否有权限
操作数据库中的对象（数据库表等）进行设定。DCL 包含以下几种指令。

COMMIT ： 确认对数据库中的数据进行的变更

ROLLBACK ： 取消对数据库中的数据进行的变更

GRANT ： 赋予用户操作权限

REVOKE ： 取消用户的操作权限

法则1-5

SQL语句以分号（ ; ）结尾。

法则1-6 关键字不区分大小写。

法则1-7 字符串和日期常数需要使用单引号（'）括起来。数字常数无需加注单引号（直接书写数字即可）。

法则1-8 单词之间需要使用半角空格或者换行符进行分隔。

法则1-9 数据库名称、表名和列名等可以使用以下三种字符。

● 半角英文字母　　 ●  半角数字　　 ●  下划线（_）

法则1-10 名称必须以半角英文字母作为开头。

法则1-11 名称不能重复。

法则1-12 删除了的表是无法恢复的。在执行 DROP TABLE 语句之前请务必仔细确认。

法则1-13 表定义变更之后无法恢复。在执行 ALTER TABLE 语句之前请务必仔细确认。
法则2-1
星号（ * ）代表全部列的意思。
法则2-2
设定汉语别名时需要使用双引号（ " ）括起来。
法则2-3
在 SELECT 语句中使用 DISTINCT 可以删除重复行。
法则2-4
WHERE 子句要紧跟在 FROM 子句之后。












## 1.创建数据库

语法1-1　创建数据库的 CREATE DATABASE 语句

	CREATE DATABASE < 数据库名称 > ;

代码清单1-1 创建数据库 shop 的 CREATE DATABASE 语句

	CREATE DATABASE shop;

语法1-2　创建表的 CREATE TABLE 语句

	CREATE TABLE < 表名 >
	（ < 列名 1> < 数据类型 > < 该列所需约束 > ，
	< 列名 2> < 数据类型 > < 该列所需约束 > ，
	< 列名 3> < 数据类型 > < 该列所需约束 > ，
	< 列名 4> < 数据类型 > < 该列所需约束 > ，
	.
	.
	.
	< 该表的约束 1> ， < 该表的约束 2> ，……）；
代码清单1-2　创建 Product 表的 CREATE TABLE 语句

	CREATE TABLE Product
	(product_id CHAR(4)  NOT NULL,
	product_name VARCHAR(100) NOT NULL,
	product_type VARCHAR(32)  NOT NULL,
	sale_price INTEGER  ,
	purchase_price INTEGER  ,
	regist_date DATE  ,
	PRIMARY KEY (product_id));

语法1-3　删除表时使用的 DROP TABLE 语句

	DROP TABLE < 表名 > ；

代码清单1-3　删除 Product 表

	DROP TABLE Product;

语法1-4　添加列的 ALTER TABLE 语句

	ALTER TABLE < 表名 > ADD COLUMN < 列的定义 > ；

代码清单1-4　添加一列可以存储100位的可变长字符串product_name_pinyin 列

	ALTER TABLE Product ADD COLUMN product_name_pinyin VARCHAR(100);
	
语法1-5　删除列的 ALTER TABLE 语句

	ALTER TABLE < 表名 > DROP COLUMN < 列名 > ；

代码清单1-5　删除 product_name_pinyin 列

	ALTER TABLE Product DROP COLUMN product_name_pinyin;

代码清单1-6　向 Product 表中插入数据的SQL语句

	-- DML ：插入数据
	START TRANSACTION; 
	INSERT INTO Product VALUES ('0001', 'T 恤衫 ', ' 衣服 ',1000, 500, '2009-09-20');
	INSERT INTO Product VALUES ('0002', ' 打孔器 ', ' 办公用品 ',500, 320, '2009-09-11');
	INSERT INTO Product VALUES ('0003', ' 运动 T 恤 ', ' 衣服 ',4000, 2800, NULL);
	INSERT INTO Product VALUES ('0004', ' 菜刀 ',  ' 厨房用具 ', 3000, 2800, '2009-09-20');
	INSERT INTO Product VALUES ('0005', ' 高压锅 ', ' 厨房用具 ',6800, 5000, '2009-01-15');
	INSERT INTO Product VALUES ('0006', ' 叉子 ',  ' 厨房用具 ',500, NULL, '2009-09-20');
	INSERT INTO Product VALUES ('0007', ' 擦菜板 ', ' 厨房用具 ',880, 790, '2008-04-28');
	INSERT INTO Product VALUES ('0008', ' 圆珠笔 ', ' 办公用品 ',100, NULL,'2009-11-11');
	COMMIT;


代码清单1-A　变更表名

	RENAME TABLE Poduct to Product;

## 2.SELECT 语句基础

语法2-1　基本的 SELECT 语句

	SELECT < 列名 > ，……FROM < 表名 > ；

代码清单2-1　从 Product 表中输出3列
SELECT product_id, product_name, purchase_price
FROM Product;

语法2-2　查询全部的列
SELECT 　 *
FROM < 表名 >;

代码清单2-2　输出 Product 表中全部的列
SELECT *
FROM Product;
代码清单2-3　与代码清单2-2具有相同含义的 SELECT 语句
SELECT product_id, product_name, product_type, sale_price,
purchase_price, regist_date
FROM Product;
代码清单2-4　为列设定别名
SELECT product_id  AS id,
product_name  AS name,
purchase_price AS price
FROM Product;
代码清单2-5　设定中文别名
SELECT product_id  AS " 商品编号 ",
product_name  AS " 商品名称 ",
purchase_price AS " 进货单价 "
FROM Product;
代码清单2-6　查询常数
SELECT ' 商品 ' AS string, 38 AS number, '2009-02-24' AS date,
product_id, product_name
FROM Product;
代码清单2-7　使用 DISTINCT 删除 product_type 列中重复的数据
SELECT DISTINCT product_type
FROM Product;
代码清单2-8　对含有 NULL 数据的列使用 DISTINCT 关键字
SELECT DISTINCT purchase_price
FROM Product;
代码清单2-9　在多列之前使用 DISTINCT
SELECT DISTINCT product_type, regist_date
FROM Product;
语法2-3　 SELECT 语句中的 WHERE 子句
SELECT < 列名 >,  ……
FROM < 表名 >
WHERE < 条件表达式 >;
代码清单2-10　用来选取 product_type 列为 ' 衣服 ' 的记录的 SELECT 语句
SELECT product_name, product_type
FROM Product
WHERE product_type = ' 衣服 ';
代码清单2-11　也可以不选取出作为查询条件的列
SELECT product_name
FROM Product
WHERE product_type = ' 衣服 ';
代码清单2-12　随意改变子句的书写顺序会造成错误
SELECT product_name, product_type
WHERE product_type = ' 衣服 '
FROM Product;
代码清单2-13　1行注释的使用示例
--  本 SELECT 语句会从结果中删除重复行。
SELECT DISTINCT product_id, purchase_price
FROM Product;
代码清单2-14　多行注释的使用示例
/*  本 SELECT 语句，
会从结果中删除重复行。 */
SELECT DISTINCT product_id, purchase_price
FROM Product;
任何注释都可以插在 SQL 语句中（代码清单 2-15、代码清单 2-16）。
代码清单2-15　在SQL语句中插入1行注释
SELECT DISTINCT product_id, purchase_price
--  本 SELECT 语句会从结果中删除重复行。
FROM Product;
代码清单2-16　在SQL语句中插入多行注释
SELECT DISTINCT product_id, purchase_price
/*  本 SELECT 语句，
会从结果中删除重复行。 */
FROM Product;


